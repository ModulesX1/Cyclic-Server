<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MdPlayer</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
</head>
<body class="container">
    <div class="my-3">
        <input class="form-control" onClick="this.select();" type="text" id="metaid" value="origin">
        <button class="btn btn-primary w-100 my-1" onclick="loadSource()">Load</button>
    </div>
    <video id="stream" class="mx-auto" style="max-width:100%;width:650px" src="/api/drive/stream/origin" controls></video>
<script>
function extractGoogleDriveFileId(url) {
  // Regular expression to extract the file ID from the URL for files only
  const pattern = /(?<=\/d\/|id=)([\w-]+)(?<!\/folders\/)/;

  const match = url.match(pattern);
  if (match) {
    return match[1];
  } else {
    return "origin";
  }
}
function loadSource() {
    stream.setAttribute("src", "/api/drive/stream/" + String( metaid.value.startsWith("https") ? extractGoogleDriveFileId( metaid.value ) : metaid.value ) );
    stream.load()
}
</script>
</body>
</html>
